<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">
  <title>sass学习</title>
  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/swiper.min.css">
  <link rel="stylesheet" href="../css/font-awesome.min.css">
  <link rel="stylesheet" href="../css/dist/output.css">
</head>
<body>
  <div id="site-container">
    <div id="site-header">
      <div class="left">
        <a href="javascript:;" class="fa fa-bars"></a>
      </div>
      <div class="title">订单</div>
      <div class="right">
        <a href="javascript:;" class="fa fa-search"></a>
      </div>
    </div><!-- /#site-header -->

    <div id="site-content">
      <div id="orderList">
        <div class="title-tabs">
          <a href="javascript:;" class="item on">全部</a>
          <a href="javascript:;" class="item">待支付</a>
          <a href="javascript:;" class="item">待取货</a>
          <a href="javascript:;" class="item">已取消</a>
          <span class="line" style="width: 25%;"></span>
        </div><!-- /.title-tabs -->

        <div class="orderContents" id="orderContents">
          <div class="swiper-container">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <div class="content" data-url="../ajax/order-list.html">
                  <span class="loading">
                    loading...
                  </span>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="content" data-url="/ajax/404">
                  <span class="loading">
                    loading...
                  </span>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="content" data-url="../ajax/order-list.html">
                  <span class="loading">
                    loading...
                  </span>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="content" data-url="../ajax/order-list.html">
                  <span class="loading">
                    loading...
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div><!-- /.orderContents -->

      </div><!-- /#orderList -->

    </div><!-- /#site-content -->

    <div id="site-footer">
      <ul class="tabs">
        <li>
          <a href="../index.html" class="link">
            <i class="fa fa-home"></i>
            <span class="text">首页</span>
          </a>
        </li>
        <li>
          <a href="./order-list.html" class="link on">
            <i class="fa fa-book"></i>
            <span class="text">订单</span>
          </a>
        </li>
        <li>
          <a href="./user.html" class="link">
            <i class="fa fa-user-circle"></i>
            <span class="text">用户</span>
          </a>
        </li>
      </ul>
    </div><!-- /#site-footer -->
  </div><!-- /#site-container -->

  <div id="site-sidebar">
    <!-- 内容暂时从 ajax 处获取吧 -->
  </div><!-- /#site-sidebar -->

  <script src="../js/in.js" charset="utf-8"></script>
  <script src="../js/jquery.js" charset="utf-8"></script>
  <script src="../js/swiper.min.js" charset="utf-8"></script>
  <script src="../js/common.js" charset="utf-8"></script>
  <script>
    (function() {
      var $root = $('.title-tabs');
      var $line = $root.find('.line');

      function setTabIndex(index) {
        var $item = $root.find('.item').eq(index);
        if ($item.length <= 0) { return; }

        $line.css({
          width: $item.outerWidth(),
          left: $item.position().left
        });

        $item.addClass('on').siblings('.on').removeClass('on');
      }

      var $swiper = $('#orderContents .swiper-container');
      var swiper = new Swiper($swiper[0], {
        initialSlide: 0,
        onSlideChangeStart: function(swiper) {
          $swiper.trigger('swiperChangeIndex', [swiper.activeIndex, swiper]);
          setTabIndex(swiper.activeIndex);
        }
      });

      $root.on('click', '.item', function() {
        swiper.slideTo($(this).index(), 300, true);
      });

      $swiper.on('swiperChangeIndex', function(e, index) {
        var $content = $swiper.find('.content').eq(index);
        if ($content.length <= 0) { return; }
        if ($content.data('init')) { return; }

        $content.data('init', 1);
        var url = $content.data('url');
        $.get(url)
          .done(function(html) {
            $content.html(formatByDefault(html));
          })
          .fail(function() {
            $content.html('<span class="notFind">没找到内容 IIOTZ_</span>');
          });
      });

      $swiper.trigger('swiperChangeIndex', [0, swiper]);
    })();
  </script>
</body>
</html>
