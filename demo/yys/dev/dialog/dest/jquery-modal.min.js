/**
  @rely: jQuery
  @author: da宗熊
  @version: 1.0.0
  @lastModify: 2017/6/29
*/
+function(t){"use strict";function e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){return y||(y=t("body")),y}function a(){return w++,g+=2}function r(){--w<=0&&(g=1e3)}function s(){for(var t=0,e=T.length;t<e;t++)T[t].hide();T=[]}function l(){for(var t=0,e=T.length;t<e;t++)T[t]._hide(!1,!1)}function c(t){for(var e=[],o=!1,n=0,i=T.length;n<i;n++){var a=T[n];t!==a||o?e.push(a):o=!0}T=e}function u(){var t=T[0];t&&t.show()}function p(t){for(var e=0,o=T.length;e<o;e++){var n=T[e];n&&n.$root&&n.$root.is(t)&&n.hide()}}function d(){return[].slice.call(arguments,0)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function t(e,o,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,o);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,o,n)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(n)},m=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),v={OPEN:"open",CLOSE:"close",DESTROY:"destroy"},y=null,w=0,g=1e3,k=function(){function e(){n(this,e);var t=this;t.$root=null,t.isShow=!1}return m(e,[{key:"fire",value:function(){return this.$root.trigger.apply(this.$root,arguments),this}},{key:"on",value:function(e,o){return o&&(o.proxy=t.proxy(function(){return o.apply(this,[].slice.call(arguments,1))},this),this.$root.on(e,o.proxy)),this}},{key:"off",value:function(t,e){return e?this.$root.off(t,e.proxy||e):this.$root.off(t),this}},{key:"one",value:function(e,o){return o&&(o.proxy=t.proxy(function(){return o.apply(this,[].slice.call(arguments,1))},this),this.$root.one(e,o.proxy)),this}},{key:"fixPosition",value:function(){var t=this.$root;if(t){var e=t.outerWidth(),o=t.outerHeight();t.css({margin:"-"+o/2+"px 0 0 -"+e/2+"px"})}}},{key:"show",value:function(){var t=this,e=t.$root;if(!t.isShow&&e)return e.show(),t.fixPosition(),t.isShow=!0,t.fire(v.OPEN),t}},{key:"hide",value:function(t){var e=this,o=e.$root;if(e.isShow&&o)return e.isShow=!1,e.fire(v.CLOSE),b.hide(o,function(){o.hide(),t&&t()}),e}},{key:"destroy",value:function(){var t=this;t.fire(v.DESTROY),t.$root&&(t.$root.remove(),t.$root=null)}}]),e}();t.fn.transitionEnd=function(t){function e(a){if(a.target===this)for(t.call(this,a),o=0;o<n.length;o++)i.off(n[o],e)}var o,n=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(t)for(o=0;o<n.length;o++)i.on(n[o],e);return this};var b={ready:function(t,e){t.removeClass("animate-out").removeClass("animate-active").addClass("animate-ready");t[0].clientLeft;e&&e()},show:function(t,e){t.addClass("animate-active").transitionEnd(function(){e&&e()})},hide:function(t,e){t.addClass("animate-out").transitionEnd(function(){t.removeClass("animate-ready").removeClass("animate-active").removeClass("animate-out"),e&&e()})}},T=[],x=function(p){function d(o){n(this,d);var a=e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this)),r=a;return r.opts=t.extend({cls:"",title:"",close:!1,buttons:[],content:"",appendTo:i(),autoDestroy:!0,closePrevious:!0,closeByOutside:!0},o||{}),r.buildHTML(),r.bindEvent(),a}return o(d,p),m(d,[{key:"getAutoEventId",value:function(){return this.eventId||(this.eventId=1),"_auto_event_"+this.eventId++}},{key:"buildHTML",value:function(){var e=this,o=e.opts,n=t(o.appendTo),i=e.$root=t('<div class="modal"></div>').css({display:"none"}),a=e.$layer=t('<div class="modal-layer"></div>').css({display:"none"});o.cls&&i.addClass(o.cls);var r=[];if(o.title&&(r.push('<div class="modal-title">'+o.title),o.close&&r.push('<a class="modal-close" data-event="close" href="javascript:;" title="关闭">&times;</a>'),r.push("</div>")),r.push('<div class="modal-main">'),r.push('<div class="modal-content"></div>'),r.push('<div class="modal-operation"></div>'),r.push("</div>"),i.html(r.join("")),!n.is("body")){var s={position:"absolute"};i.css(s),a.css(s)}n.append(a),n.append(i),e.setContent(o.content),e.setButtons(o.buttons)}},{key:"setContent",value:function(t){var e=this.$root;return this.opts.content=t,e.find(".modal-content").html(t),this}},{key:"setButtons",value:function(t){for(var e=this,o=[],n=e.$root,i=n.find(".modal-operation"),a=e.opts.buttons=t||[],r=0,s=a.length;r<s;r++)!function(t){var n=[],i=t.text,a=t.cls||"modal-button";t.event&&n.push(t.event),t.onClick&&(event=e.getAutoEventId(),n.push(event),e.on(event,t.onClick)),o.push('<a href="javascript:;" data-event="'+n.join(",")+'" class="'+a+'">'+i+"</a>")}(a[r]);return o.length>0?i.html(o.join("")).show():i.hide(),e}},{key:"bindEvent",value:function(){var e=this;e.$root.on("click","[data-event]",function(o){for(var n=t(this).attr("data-event"),i=n.split(","),a=0,r=i.length;a<r;a++){var s=i[a];"close"==s?e.hide():e.fire(s,[o])}}),e.$layer.on("click",function(){e.opts.closeByOutside&&e.hide()})}},{key:"show",value:function(){var t=this,e=t.$root,o=t.$layer;if(!t.isShow&&e){t.opts.closePrevious?s():l(),T.unshift(this);var n=a(),i={display:"block","z-index":n};return o.css(i),i["z-index"]++,e.css(i),h(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"show",this).call(this),b.ready(o,function(){b.show(o)}),b.ready(e,function(){b.show(e)}),this}}},{key:"_hide",value:function(t,e){var o=this,n=o.$root,i=o.$layer;if(o.isShow&&n){r();b.hide(i,function(){i.hide()}),h(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"hide",this).call(this,function(){t&&o.opts.autoDestroy&&o.destroy()}),e&&(c(o),u())}}},{key:"hide",value:function(){return this._hide(!0,!0),this}},{key:"destroy",value:function(){var t=this;t.$root&&(t.fire("destroy"),t.$layer.remove(),t.$root.remove(),t.opts=t.isShow=t.events=t.$layer=t.$root=null)}}]),d}(k),C=function(a){function r(o){n(this,r);var a=e(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o)),s=a;return s.opts=t.extend({cls:"",content:"",autoDestroy:!0,closeByOutside:!1,appendTo:i()},o||{}),s.buildHTML(),s.bindEvent(),a}return o(r,a),m(r,[{key:"buildHTML",value:function(){var e=this,o=this.opts,n=o.appendTo,i=e.$root=t('<div class="modal-popup"></div>'),a=e.$layer=t('<div class="modal-popup-layer"></div>');if(i.html(o.content),i.addClass(o.cls),!n.is("body")){var r={position:"absolute"};i.css(r),a.css(r)}n.append(a),n.append(i)}},{key:"bindEvent",value:function(){var t=this;t.$root.on("click",".close-popup",function(){t.hide()}),t.opts.closeByOutside&&t.$layer.on("click",function(){t.hide()})}},{key:"fixPosition",value:function(){return this}},{key:"show",value:function(){var t=this,e=t.$root,o=t.$layer;if(!t.isShow&&e)return h(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"show",this).call(this),o.show(),b.ready(o,function(){b.show(o)}),b.ready(e,function(){b.show(e)}),this}},{key:"hide",value:function(){var t=this,e=t.$root,o=t.$layer;if(t.isShow&&e)return b.hide(o,function(){o.hide()}),h(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"hide",this).call(this,function(){t.opts.autoDestroy&&t.destroy()}),this}},{key:"destroy",value:function(){var t=this;t.$root&&(t.fire("destroy"),t.$layer.remove(),t.$root.remove(),t.opts=t.isShow=t.events=t.$layer=t.$root=null)}}]),r}(k),O={confirm:"confirm",cancel:"cancel",close:"close"},E={buttonOk:"确定",buttonCancel:"取消",preloaderTitle:"Loading...",closePrevious:!0};t.modal=function(e){return new x(t.extend({closePrevious:E.closePrevious},e||{}))},t.modal.prototype.defaults=E,t.closeModal=function(t){p(t)},t.alert=function(e,o,n){"object"===(void 0===o?"undefined":f(o))&&(n=o,o="");var i=t.modal(t.extend({title:o,content:e,buttons:[{text:E.buttonOk,event:"close"}]},n||{}));return i.on(O.close,function(){i.fire(O.confirm)}),i.show()},t.confirm=function(e,o,n){"object"===(void 0===o?"undefined":f(o))&&(n=o,o="");var i=!1,a=function(){i||(i=!0,s.fire(O.cancel,d(arguments)),s.hide())},r=function(){i||(i=!0,s.fire(O.confirm,d(arguments)),s.hide())},s=t.modal(t.extend({title:o,content:e,buttons:[{text:E.buttonCancel,onClick:a},{text:E.buttonOk,onClick:r}]},n||{}));return s.on(O.close,a),s.show()},t.prompt=function(e,o,n){"object"===(void 0===o?"undefined":f(o))&&(n=o,o="");var i=!1,a=function(){i||(i=!0,s.fire(O.cancel,d(arguments)),s.hide())},r=function(){if(!i){i=!0;var t=d(arguments);t.unshift(s.$root.find(".js-modal-prompt-input").val()),s.fire(O.confirm,t),s.hide()}},s=t.modal(t.extend({title:o,content:e+'<div class="modal-content-below"><input type="text" class="modal-input js-modal-prompt-input" /></div>',buttons:[{text:E.buttonCancel,onClick:a},{text:E.buttonOk,onClick:r}]},n||{}));return s.on(O.close,a),s.show()},t.showPreloader=function(e){return t.modal({cls:"modal-preloader",title:e||E.preloaderTitle,content:'<div class="preloader"></div>',closeByOutside:!1}).show()},t.hidePreloader=function(){t.closeModal(".modal-preloader")},t.showIndicator=function(e){var o=t(e||i()),n=t('<div class="preloader-indicator-overlay"></div>'),a=t('<div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>');if(!o.is("body")){var r={position:"absolute"};n.css(r),a.css(r)}o.append(n),o.append(a)},t.hideIndicator=function(){t(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},t.popup=function(e,o){var n=t(e),a={};return a="object"===(void 0===e?"undefined":f(e))?e:{cls:n.length>0?n[0].className:"",content:n.length?n.html():"",appendTo:o||i()},new C(a).show()},t(function(){t(document).on("click",".open-popup",function(){var e=t(this);t.popup(e.attr("data-popup"),e.attr("data-popup-append-to"))})}),t.toast=function(t,e){var o=new C({cls:"toast",content:t,closeByOutside:!1});return o.$root.removeClass("modal-popup"),k.prototype.fixPosition.call(o),setTimeout(function(){o.hide()},e||2e3),o.show(),o.$layer.hide(),o},t.Popup=C,t.Modal=x,function(t){t.compareVersion=function(t,e){var o=t.split("."),n=e.split(".");if(t===e)return 0;for(var i=0;i<o.length;i++){var a=parseInt(o[i]);if(!n[i])return 1;var r=parseInt(n[i]);if(a<r)return-1;if(a>r)return 1}return 1},t.getTouchPosition=function(t){return t=t.originalEvent||t,"touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type?{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY}:{x:t.pageX,y:t.pageY}}}(t),function(t){var e={},o=navigator.userAgent,n=o.match(/(Android);?[\s\/]+([\d.]+)?/),i=o.match(/(iPad).*OS\s([\d_]+)/),a=o.match(/(iPod)(.*OS\s([\d_]+))?/),r=!i&&o.match(/(iPhone\sOS)\s([\d_]+)/);if(e.ios=e.android=e.iphone=e.ipad=e.androidChrome=!1,n&&(e.os="android",e.osVersion=n[2],e.android=!0,e.androidChrome=o.toLowerCase().indexOf("chrome")>=0),(i||r||a)&&(e.os="ios",e.ios=!0),r&&!a&&(e.osVersion=r[2].replace(/_/g,"."),e.iphone=!0),i&&(e.osVersion=i[2].replace(/_/g,"."),e.ipad=!0),a&&(e.osVersion=a[3]?a[3].replace(/_/g,"."):null,e.iphone=!0),e.ios&&e.osVersion&&o.indexOf("Version/")>=0&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=o.toLowerCase().split("version/")[1].split(" ")[0]),e.webView=(r||i||a)&&o.match(/.*AppleWebKit(?!.*Safari)/i),e.os&&"ios"===e.os){var s=e.osVersion.split(".");e.minimalUi=!e.webView&&(a||r)&&(1*s[0]==7?1*s[1]>=1:1*s[0]>7)&&t('meta[name="viewport"]').length>0&&t('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var l=t(window).width(),c=t(window).height();e.statusBar=!1,e.webView&&l*c==screen.width*screen.height?e.statusBar=!0:e.statusBar=!1;var u=[];if(e.pixelRatio=window.devicePixelRatio||1,u.push("pixel-ratio-"+Math.floor(e.pixelRatio)),e.pixelRatio>=2&&u.push("retina"),e.os&&(u.push(e.os,e.os+"-"+e.osVersion.split(".")[0],e.os+"-"+e.osVersion.replace(/\./g,"-")),"ios"===e.os))for(var p=parseInt(e.osVersion.split(".")[0],10),d=p-1;d>=6;d--)u.push("ios-gt-"+d);e.statusBar?u.push("with-statusbar-overlay"):t("html").removeClass("with-statusbar-overlay"),u.length>0&&t("html").addClass(u.join(" ")),t.device=e}(t),function(t){t.support=function(){return{touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}}(),t.touchEvents={start:t.support.touch?"touchstart":"mousedown",move:t.support.touch?"touchmove":"mousemove",end:t.support.touch?"touchend":"mouseup"},t.getTranslate=function(t,e){var o,n,i,a;return void 0===e&&(e="x"),i=window.getComputedStyle(t,null),window.WebKitCSSMatrix?a=new WebKitCSSMatrix("none"===i.webkitTransform?"":i.webkitTransform):(a=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=a.toString().split(",")),"x"===e&&(n=window.WebKitCSSMatrix?a.m41:16===o.length?parseFloat(o[12]):parseFloat(o[4])),"y"===e&&(n=window.WebKitCSSMatrix?a.m42:16===o.length?parseFloat(o[13]):parseFloat(o[5])),n||0},t.requestAnimationFrame=function(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(t):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(t):window.setTimeout(t,1e3/60)},t.cancelAnimationFrame=function(t){return window.cancelAnimationFrame?window.cancelAnimationFrame(t):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(t):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(t):window.clearTimeout(t)},t.fn.data=function(t,e){if(void 0!==e){for(var o=0;o<this.length;o++){var n=this[o];n.smElementDataStorage||(n.smElementDataStorage={}),n.smElementDataStorage[t]=e}return this}if(this[0]&&this[0].getAttribute){var i=this[0].getAttribute("data-"+t);return i||(this[0].smElementDataStorage&&t in this[0].smElementDataStorage?this[0].smElementDataStorage[t]:void 0)}},t.fn.animationEnd=function(t){function e(a){for(t(a),o=0;o<n.length;o++)i.off(n[o],e)}var o,n=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i=this;if(t)for(o=0;o<n.length;o++)i.on(n[o],e);return this},t.fn.transition=function(t){"string"!=typeof t&&(t+="ms");for(var e=0;e<this.length;e++){var o=this[e].style;o.webkitTransitionDuration=o.MsTransitionDuration=o.msTransitionDuration=o.MozTransitionDuration=o.OTransitionDuration=o.transitionDuration=t}return this},t.fn.transform=function(t){for(var e=0;e<this.length;e++){var o=this[e].style;o.webkitTransform=o.MsTransform=o.msTransform=o.MozTransform=o.OTransform=o.transform=t}return this}}(t);var V=function(i){function a(o){return n(this,a),e(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t.extend({layerCls:"",closeByOutside:!0},o||{})))}return o(a,i),m(a,[{key:"buildHTML",value:function(){h(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"buildHTML",this).call(this);var t=this;t.$root.addClass("modal-picker").removeClass("modal-popup"),t.$layer.addClass("modal-picker-layer").removeClass("modal-popup-layer").addClass(t.opts.layerCls)}},{key:"bindEvent",value:function(){h(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"bindEvent",this).call(this);var t=this;t.$root.off("click").on("click",".close-picker",function(){t.hide()})}}]),a}(C);t.pickerModal=function(t,e){return new V({cls:"modal-picker",content:t,appendTo:e||i()}).show()},function(t){var e=function(e){function o(){if(r.opened)for(var t=0;t<r.cols.length;t++)r.cols[t].divider||(r.cols[t].calcSize(),r.cols[t].setValue(r.cols[t].displayValue,0,!1))}function n(t){if(t.preventDefault(),!r.opened&&(r.open(),r.params.scrollToInput)){var e=r.input.parents(".content");if(0===e.length)return;var o,n=parseInt(e.css("padding-top"),10),i=parseInt(e.css("padding-bottom"),10),a=e[0].offsetHeight-n-r.container.height(),s=e[0].scrollHeight-n-r.container.height(),l=r.input.offset().top-n+r.input[0].offsetHeight;if(l>a){var c=e.scrollTop()+l-a;c+a>s&&(o=c+a-s+i,a===s&&(o=r.container.height()),e.css({"padding-bottom":o+"px"})),e.scrollTop(c,300)}}}function i(e){r.input&&r.input.length>0?e.target!==r.input[0]&&0===t(e.target).parents(".picker-modal").length&&r.close():0===t(e.target).parents(".picker-modal").length&&r.close()}function a(){r.opened=!1,r.input&&r.input.length>0&&(r.input.parents(".content").css({"padding-bottom":""}),r.input.trigger("close.picker")),r.params.onClose&&r.params.onClose(r),r.container.find(".picker-items-col").each(function(){r.destroyPickerCol(this)})}var r=this,s={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,toolbar:!0,toolbarCloseText:"OK",toolbarTemplate:'<header class="bar bar-nav">          <button class="button button-link pull-right close-picker">OK</button>          <h1 class="title"></h1>          </header>',separator:" "};e=e||{};for(var l in s)void 0===e[l]&&(e[l]=s[l]);r.params=e,r.cols=[],r.initialized=!1,r.inline=!!r.params.container;var c=t.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!t.device.android;return r.setValue=function(t,e){for(var o=0,n=0;n<r.cols.length;n++)r.cols[n]&&!r.cols[n].divider&&(r.cols[n].setValue(t[o],e),o++)},r.updateValue=function(){for(var e=[],o=[],n=0;n<r.cols.length;n++)r.cols[n].divider||(e.push(r.cols[n].value),o.push(r.cols[n].displayValue));if(!(e.indexOf(void 0)>=0)&&(r.value=e,r.displayValue=o,r.params.onChange&&r.params.onChange(r,r.value,r.displayValue),r.input&&r.input.length>0)){var i;if(r.params.formatValue)i=r.params.formatValue(r,r.value,r.displayValue);else for(i=r.displayValue.join(r.params.separator);i.endsWith(r.params.separator);)i=i.substr(0,i.length-r.params.separator.length);t(r.input).val(i),t(r.input).trigger("change"),r.inputTarget&&r.inputTarget.val(r.value.join(""))}},r.initPickerCol=function(e,o){function n(){w=t.requestAnimationFrame(function(){d.updateItems(void 0,void 0,0),n()})}function i(e){if(!k&&!g){e.preventDefault(),g=!0;var o=t.getTouchPosition(e);b=T=o.y,x=(new Date).getTime(),S=!0,O=V=t.getTranslate(d.wrapper[0],"y")}}function a(e){if(g){e.preventDefault(),S=!1;var o=t.getTouchPosition(e);T=o.y,k||(t.cancelAnimationFrame(w),k=!0,O=V=t.getTranslate(d.wrapper[0],"y"),d.wrapper.transition(0)),e.preventDefault();V=O+(T-b),E=void 0,V<v&&(V=v-Math.pow(v-V,.8),E="min"),V>y&&(V=y+Math.pow(V-y,.8),E="max"),d.wrapper.transform("translate3d(0,"+V+"px,0)"),d.updateItems(void 0,V,0,r.params.updateValuesOnTouchmove),M=V-_||V,$=(new Date).getTime(),_=V}}function s(e){if(!g||!k)return void(g=k=!1);g=k=!1,d.wrapper.transition(""),E&&("min"===E?d.wrapper.transform("translate3d(0,"+v+"px,0)"):d.wrapper.transform("translate3d(0,"+y+"px,0)")),C=(new Date).getTime();var o;C-x>300?o=V:(Math.abs(M/(C-$)),o=V+M*r.params.momentumRatio),o=Math.max(Math.min(o,y),v);var i=-Math.floor((o-y)/h);r.params.freeMode||(o=-i*h+y),d.wrapper.transform("translate3d(0,"+parseInt(o,10)+"px,0)"),d.updateItems(i,o,"",!0),r.params.updateValuesOnMomentum&&(n(),d.wrapper.transitionEnd(function(){t.cancelAnimationFrame(w)})),setTimeout(function(){S=!0},100)}function l(e){if(S){t.cancelAnimationFrame(w);var o=this.innerHTML;d.setValue(o)}}var u=t(e),p=u.index(),d=r.cols[p];if(!d.divider){d.container=u,d.wrapper=d.container.find(".picker-items-col-wrapper"),d.items=d.wrapper.find(".picker-item");var f,h,m,v,y;d.replaceValues=function(t,e){d.destroyEvents(),d.values=t,d.displayValues=e;var o=r.columnHTML(d,!0);d.wrapper.html(o),d.items=d.wrapper.find(".picker-item"),d.calcSize(),d.setValue(d.displayValues[0],0,!0),d.initEvents()},d.calcSize=function(){r.params.rotateEffect&&(d.container.removeClass("picker-items-col-absolute"),d.width||d.container.css({width:""}));var e,o;e=0,o=d.container[0].offsetHeight,f=d.wrapper[0].offsetHeight,h=f/d.items.length,m=f,v=o/2-m+h/2,y=o/2-h/2,d.width&&(e=d.width,parseInt(e,10)===e&&(e+="px"),d.container.css({width:e})),r.params.rotateEffect&&(d.width||(d.items.each(function(){var o=t(this);o.css({width:"auto"}),e=Math.max(e,o[0].offsetWidth),o.css({width:""})}),d.container.css({width:e+2+"px"})),d.container.addClass("picker-items-col-absolute"))},d.calcSize(),d.wrapper.transform("translate3d(0,"+y+"px,0)").transition(0);var w;d.setValue=function(e,o,i){void 0===o&&(o="");var a=d.wrapper.find(".picker-item").filter(function(){return this.innerHTML===e}).index();if(void 0!==a&&-1!==a){var s=-a*h+y;d.wrapper.transition(o),d.wrapper.transform("translate3d(0,"+s+"px,0)"),r.params.updateValuesOnMomentum&&d.activeIndex&&d.activeIndex!==a&&(t.cancelAnimationFrame(w),d.wrapper.transitionEnd(function(){t.cancelAnimationFrame(w)}),n()),d.updateItems(a,s,o,i)}},d.updateItems=function(e,o,n,i){void 0===o&&(o=t.getTranslate(d.wrapper[0],"y")),void 0===e&&(e=-Math.round((o-y)/h)),e<0&&(e=0),e>=d.items.length&&(e=d.items.length-1);var a=d.activeIndex;d.activeIndex=e,d.wrapper.find(".picker-selected").removeClass("picker-selected"),r.params.rotateEffect&&d.items.transition(n);var s=d.items.eq(e).addClass("picker-selected").transform("");if((i||void 0===i)&&(d.value=s.attr("data-picker-value"),d.displayValue=d.displayValues?d.displayValues[e]:d.value,a!==e&&(d.onChange&&d.onChange(r,d.value,d.displayValue),r.updateValue())),r.params.rotateEffect){Math.floor((o-y)/h);d.items.each(function(){var e=t(this),n=e.index()*h,i=y-o,a=n-i,r=a/h,s=Math.ceil(d.height/h/2)+1,l=-18*r;l>180&&(l=180),l<-180&&(l=-180),Math.abs(r)>s?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),e.transform("translate3d(0, "+(-o+y)+"px, "+(c?-110:0)+"px) rotateX("+l+"deg)")})}},o&&d.updateItems(0,y,0);var g,k,b,T,x,C,O,E,V,_,M,$,S=!0;d.initEvents=function(e){var o=e?"off":"on";d.container[o](t.touchEvents.start,i),d.container[o](t.touchEvents.move,a),d.container[o](t.touchEvents.end,s),d.items[o]("click",l)},d.destroyEvents=function(){d.initEvents(!0)},d.container[0].f7DestroyPickerCol=function(){d.destroyEvents()},d.initEvents()}},r.destroyPickerCol=function(e){e=t(e),"f7DestroyPickerCol"in e[0]&&e[0].f7DestroyPickerCol()},t(window).on("resize",o),r.columnHTML=function(t,e){var o,n;if(t.divider)n='div class="picker-items-col picker-items-col-divider '+(t.textAlign?"picker-items-col-"+t.textAlign:"")+" "+(t.cssClass||"")+'">'+t.content+"</div>";else{var i;o=[];for(var a=0;a<t.values.length;a++)i=t.displayValues?t.displayValues[a]:t.values[a],o.push(["<div",' class="picker-item',i.length>6?" picker-item-long":"",'"',' data-picker-value="',t.values[a],'">',i,"</div>"].join(""));o=o.join(""),n=['<div class="picker-items-col ',t.cssClass||"",'">','<div class="picker-items-col-wrapper">',o,"</div>","</div>"].join("")}return e?o:n},r.layout=function(){var t,e="",o="";r.cols=[];var n="";for(t=0;t<r.params.cols.length;t++){var i=r.params.cols[t];n+=r.columnHTML(r.params.cols[t]),r.cols.push(i)}o="picker-modal picker-columns "+(r.params.cssClass||"")+(r.params.rotateEffect?" picker-3d":""),e='<div class="'+o+'">'+(r.params.toolbar?r.params.toolbarTemplate.replace(/{{closeText}}/g,r.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+n+'<div class="picker-center-highlight"></div></div></div>',r.pickerHTML=e},r.params.input&&(r.input=t(r.params.input),r.input.length>0&&(r.input.data("target")&&(r.inputTarget=t(r.input.data("target"))),r.params.inputReadOnly&&r.input.prop("readOnly",!0),r.inline||r.input.on("click.picker",function(t){n(t),r.params.inputReadOnly&&(this.focus(),this.blur())}),r.params.inputReadOnly&&r.input.on("focus.picker mousedown.picker",function(t){t.preventDefault()}))),r.inline||t("html").on("click",i),r.opened=!1,r.open=function(){if(!r.opened){if(r.layout(),r.inline)r.container=t(r.pickerHTML),r.container.addClass("picker-modal-inline"),t(r.params.container).append(r.container);else{var e=t.pickerModal(r.pickerHTML);r.container=e.$root,e.on("close",function(){a()})}r.container.find(".picker-items-col").each(function(){var t=!0;(!r.initialized&&r.params.value||r.initialized&&r.displayValue)&&(t=!1),r.initPickerCol(this,t)});var o;r.initialized||(o=r.params.displayValue||r.params.value),o||(o=r.displayValue||r.value),o&&r.setValue(o,0),r.initialized||r.setValue(o,0)}r.opened=!0,r.initialized=!0,r.params.onOpen&&r.params.onOpen(r)},r.close=function(){r.opened&&!r.inline&&t.closeModal(r.container)},r.destroy=function(){r.close(),r.params.input&&r.input.length>0&&r.input.off("click.picker focus.picker mousedown.picker"),t("html").off("click",i),t(window).off("resize",o)},r.inline&&r.open(),r};t(document).on("click",".close-picker",function(){var e=t(".picker-modal.modal-in");e.length>0?t.closeModal(e):(e=t(".popover.modal-in .picker-modal"),e.length>0&&t.closeModal(e.parents(".popover")))}),t(document).on(t.touchEvents.move,".picker-modal-inner",function(t){t.preventDefault()}),t.fn.picker=function(o){var n=arguments;return this.each(function(){if(this){var i=t(this),a=i.data("picker");if(!a){o=o||{};var r=i.val();void 0===o.value&&""!==r&&(o.value=o.cols.length>1?r.split(s.params.separator):[r]);var s=t.extend({input:this},o);a=new e(s),i.data("picker",a)}(void 0===o?"undefined":f(o))===f("a")&&a[o].apply(a,Array.prototype.slice.call(n,1))}})}}(t)}(window.jQuery||window.$);