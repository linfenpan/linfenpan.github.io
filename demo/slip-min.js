// Generated by CoffeeScript 1.7.1
// https://github.com/binnng/slip.js
(function(k,b){var w,s,p,y,n,o,h,u,v,t,l,r,m,x,j,e,a,d,c,q,f,i,g;x=void 0;v=null;e="x";d="y";a="xy";n="left";l="right";j="up";s="down";h=10;o=40;w=["webkit","moz","ms","o",""];t=/\-?[0-9]+\.?[0-9]*/g;y="ontouchend" in k;r=y?"touchstart":"mousedown";u=y?"touchmove":"mousemove";p=y?"touchend":"mouseup";f=function(){};i=function(F,C){var B,E,D,A,z;z=[];for(D=0,A=w.length;D<A;D++){E=w[D];B=E?""+E+"Transition":"transition";z.push(F.style[B]=C)}return z};g=function(I,H,F,E){var A,D,C,G,B;B=[];for(C=0,G=w.length;C<G;C++){D=w[C];A=D?""+D+"Transform":"transform";B.push(I.style[A]="translate3d("+(H||0)+"px, "+(F||0)+"px, "+(E||0)+"px)")}return B};q=function(E){var G,B,A,D,F,C,z;F=[];B="";G="";for(C=0,z=w.length;C<z;C++){D=w[C];A=D?""+D+"Transform":"transform";B=E.style[A];if(B&&typeof B==="string"){G=B.match(/\((.*)\)/g)[0];F=G&&G.match(t);break}}if(F.length){return{x:F[0]||0,y:F[1]||0,z:F[2]||0}}};m=(function(){var z,A;A=[function(C){var E,D;D=C.touches&&(C.touches.length?C.touches:[C]);E=(C.changedTouches&&C.changedTouches[0])||(C.originalEvent&&C.originalEvent.changedTouches&&C.originalEvent.changedTouches[0])||D[0].originalEvent||D[0];return{"x":E.clientX,"y":E.clientY}},function(C){var D;D=C;return{"x":D.clientX,"y":D.clientY}}];z=y?A[0]:A[1];function B(C,D){this.ele=C;this.direction=D;this._isPressed=false;this.onStart=this.onMove=this.onEnd=f;this.coord=this.eventCoords=this.cacheCoords=this.finger=this.absFinger=v;this.orient=[];this.isSlider=false;this.isWebapp=false;this.duration="400"}B.prototype.start=function(C){return(this.onStart=C)&&this};B.prototype.move=function(C){return(this.onMove=C)&&this};B.prototype.end=function(C){return(this.onEnd=C)&&this};B.prototype.setCoord=function(F){var C,E,D;E=this.coord={"x":F[e]||0,"y":F[d]||0};D=this.ele;g(D,E[e],E[d]);for(C in E){D.setAttribute(C,E[C])}return this};B.prototype.onTouchStart=function(D){var C;this._isPressed=true;this.eventCoords=z(D);this.cacheCoords=this.coord;this.finger=this.absFinger=v;if(this.isSlider){this.onSliderStart(D)}return C=this.onStart.apply(this,[D])};B.prototype.onTouchMove=function(C){var I,H,J,N,L,K,F,M,E,G,D;C.preventDefault();if(!this._isPressed){return false}F=z(C);J=this.direction;K=this.finger={x:F.x-this.eventCoords.x,y:F.y-this.eventCoords.y};I=this.absFinger={x:Math.abs(K.x),y:Math.abs(K.y)};if(J!==a){M=J===e?d:e;if(I[J]<h||I[M]>o){return false}}E=[];if(I.x>h){E.push(K.x<0?n:l)}if(I.y>h){E.push(K.y<0?j:s)}this.orient=E;G=this.onMove.apply(this,[C]);if(G===false){return false}N=this.ele;L=this.coord={"x":J.indexOf(e)<0?this.cacheCoords[e]:this.cacheCoords[e]-0+K.x,"y":J.indexOf(d)<0?this.cacheCoords[d]:this.cacheCoords[d]-0+K.y};g(N,L[e],L[d]);D=[];for(H in L){D.push(N.setAttribute(H,L[H]))}return D};B.prototype.onTouchEnd=function(D){var E,C;this._isPressed=false;E=this.ele;if(this.isSlider){this.onSliderEnd(D)}C=q(this.ele);if(C){this.setCoord(C)}return this.orient=[]};B.prototype.onSliderStart=function(C){return i(this.ele,v)};B.prototype.onSliderEnd=function(O,S){var N,D,L,M,I,G,T,C,P,E,J,K,H,Q,R,F;if(S==null){S={}}J=S.jumpPage;I=J;K=this.orient.join("");F=0;T=false;H=this.page;Q=this.pageNum;L=this.ele;D=this.duration;N=this.absFinger;P=K.indexOf(j)>-1;M=K.indexOf(s)>-1;G=K.indexOf(n)>-1;C=K.indexOf(l)>-1;E=this.direction===d;if(J!==x){H=J}else{if(E){if(P){H++}if(M){H--}}else{if(G){H++}if(C){H--}}}if(H>=Q){H=Q-1;T=true}if(H<0){H=0;T=true}i(L,"all "+D+"ms ease");if(E){F="-"+(H*this.pageHeight);g(L,0,F,0)}else{F="-"+(H*this.pageWidth);g(L,F,0,0)}this.page=H;if(I){this.onTouchEnd.call(this,v)}R=this.onEnd.apply(this,[O]);return this};B.prototype.init=function(){var C,H,F,D,I,E,G;this.coord={"x":0,"y":0};G=this._onTouchStart=(function(J){return function(K){return J.onTouchStart(K)}})(this);E=this._onTouchMove=(function(J){return function(K){return J.onTouchMove(K)}})(this);I=this._onTouchEnd=(function(J){return function(K){return J.onTouchEnd(K)}})(this);F=this.ele;F.addEventListener(r,G,false);F.addEventListener(u,E,false);F.addEventListener(p,I,false);D=this.coord={"x":0,"y":0};H=this.direction;g(F,D[e],D[d]);for(C in D){F.setAttribute(C,D[C])}return this};B.prototype.resetWebapp=function(){var C=this;C.destroy();C.init();C.webapp()};B.prototype.destroy=function(){var C;C=this.ele;C.removeEventListener(r,this._onTouchStart,false);C.removeEventListener(u,this._onTouchMove,false);C.removeEventListener(p,this._onTouchEnd,false);return this};B.prototype.slider=function(L){var J,D,G,K,M,H,F,E,I,C;M=this.ele;if(typeof L==="string"){L=M.querySelectorAll(L)}else{if(!L){L=[];D=M.childNodes;for(F=0,I=D.length;F<I;F++){J=D[F];if(J.nodeType===1){L.push(J)}}}}this.isSlider=true;this.page=0;this.elPages=L;K=L.length;H=this.pageNum=K?K:0;if(this.direction===e){for(E=0,C=L.length;E<C;E++){G=L[E];G.style.cssFloat=n}}return this};B.prototype.webapp=function(E){var D,C;this.isWebapp=true;this.slider(E).fullscreen();E=this.elPages;D=this.ele;C=this.pageNum;D.style.height=""+(k.innerHeight*C)+"px";this.height(k.innerHeight);if(this.direction===e){this.width(k.innerWidth)
}return this};B.prototype.height=function(E){var D,I,H,G,F,C;H=this.ele;I=this.elPages;G=this.pageNum;E=String(E).replace("px","");if(E==="100%"){E=k.innerHeight}this.pageHeight=E;if(this.direction===e){H.style.height=""+E+"px"}for(F=0,C=I.length;F<C;F++){D=I[F];D.style.height=""+E+"px"}return this};B.prototype.width=function(E){var D,I,H,G,F,C;H=this.ele;I=this.elPages;G=this.pageNum;E=String(E).replace("px","");if(E==="100%"){E=k.innerWidth}this.pageWidth=E;if(this.direction===e){H.style.width=""+(E*G)+"px"}for(F=0,C=I.length;F<C;F++){D=I[F];D.style.width=""+E+"px"}return this};B.prototype.fullscreen=function(){var E,D,C;D=this.ele;E=D;while(C=E.parentNode){if(C.nodeType===1){C.style.height="100%";C.style.overflow="hidden"}E=C}return this};B.prototype.time=function(C){this.duration=String(C).replace("ms","");return this};B.prototype.jump=function(C){this.onSliderEnd(v,{jumpPage:C});return this};return B})();c=function(A,B){var z;z=new m(A,B||e);return z.init()};if(typeof define==="function"){return define("binnng/slip.js",function(A,z,B){return c})}else{return k["Slip"]=c}})(window,document);
